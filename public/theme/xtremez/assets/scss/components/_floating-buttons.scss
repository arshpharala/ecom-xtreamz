// Variables
$chat-bg: #25d366;
$chat-color: var(--color-secondary);
$chat-shadow: 0 8px 25px -5px rgba(45, 62, 79, 0.3);
$chat-z: 9999999;

.btn-chat {
    background-color: $chat-bg !important;
    color: $chat-color !important;
    width: auto;
}

.chat-widget {
    position: fixed !important;
    right: 18px;
    bottom: 18px !important;
    width: 60px !important;
    height: 60px !important;

    background-color: $chat-bg !important;
    color: $chat-color !important;
    border-radius: 50% !important;

    display: flex !important;
    align-items: center !important;
    justify-content: center !important;

    box-shadow: $chat-shadow !important;
    z-index: $chat-z !important;
    text-decoration: none !important;

    &__icon {
        display: block !important;
        width: 30px !important;
        height: 30px !important;
        background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='30px' height='30px'><path fill='%23fff' d='M3.516 3.516c4.686-4.686 12.284-4.686 16.97 0 4.686 4.686 4.686 12.283 0 16.97a12.004 12.004 0 01-13.754 2.299l-5.814.735a.392.392 0 01-.438-.44l.748-5.788A12.002 12.002 0 013.517 3.517zm3.61 17.043l.3.158a9.846 9.846 0 0011.534-1.758c3.843-3.843 3.843-10.074 0-13.918-3.843-3.843-10.075-3.843-13.918 0a9.846 9.846 0 00-1.747 11.554l.16.303-.51 3.942a.196.196 0 00.219.22l3.961-.501zm6.534-7.003l-.933 1.164a9.843 9.843 0 01-3.497-3.495l1.166-.933a.792.792 0 00.23-.94L9.561 6.96a.793.793 0 00-.924-.445 1291.6 1291.6 0 00-2.023.524.797.797 0 00-.588.88 11.754 11.754 0 0010.005 10.005.797.797 0 00.88-.587l.525-2.023a.793.793 0 00-.445-.923L14.6 13.327a.792.792 0 00-.94.23z'/></svg>") !important;
        background-repeat: no-repeat !important;
        background-position: center !important;
        background-size: contain !important;
    }

    &__label {
        position: fixed !important;
        right: 85px;
        bottom: 33px !important;
        display: table !important;
        visibility: hidden !important;
        z-index: $chat-z !important;

        &-text {
            color: #43474e !important;
            background: #f5f7f9d8 !important;
            display: inline-block !important;
            padding: 7px !important;
            border-radius: 3px !important;
            font-size: 14px !important;
            bottom: 15px !important;
            visibility: visible;
        }
    }
}

/* Base button */
.scrolltop-btn {
    /* Theme hooks */
    --btn-size: 52px;
    --accent: var(--color-secondary, #1f61c4);
    --radius: 10px;

    position: fixed;
    right: 18px;
    bottom: 96px;
    z-index: 1085; /* above modals/backdrops in many stacks */
    width: var(--btn-size);
    height: var(--btn-size);
    border-radius: var(--radius);
    display: grid;
    place-items: center;
    cursor: pointer;

    border: 1px solid rgba(0, 0, 0, 0.06);
    background: #fff;
    color: var(--accent);
    box-shadow: 0 8px 22px rgba(0, 0, 0, 0.12);

    opacity: 0;
    visibility: hidden;
    transform: translateY(8px);
    transition: opacity 0.2s ease, transform 0.2s ease, box-shadow 0.2s ease,
        background 0.2s, color 0.2s, border-color 0.2s;

    /* Icon */
    i {
        font-size: 1.6rem;
        line-height: 1;
    }

    /* Interaction */
    &:hover {
        box-shadow: 0 10px 26px rgba(0, 0, 0, 0.14);
    }
    &:active {
        transform: translateY(9px);
    }

    /* visible state toggled by JS */
    &.is-visible {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
    }

    /* iOS safe area */
    @supports (padding: max(0px)) {
        bottom: max(96px, env(safe-area-inset-bottom));
        right: max(18px, env(safe-area-inset-right));
    }
}

/* Solid square variant */
.btn-solid-square {
    background: var(--color-dark);
    color: var(--color-light);
    border-color: var(--color-dark);
}

/* Outline square (use this class instead of .btn-solid-square to test) */
.btn-outline-square {
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(0, 0, 0, 0.08);
    color: var(--accent);
}

/* Optional: smaller/larger */
.scrolltop-btn.is-sm {
    --btn-size: 44px;
}
.scrolltop-btn.is-lg {
    --btn-size: 60px;
}

/* Mobile nudge */
@media (max-width: 575.98px) {
    .scrolltop-btn {
        right: 14px;
        bottom: 14px;
    }
}
